@use 'sass:color';
@use '@styles/variables';
@use '@styles/functions';

/* === Base button === */
.btn {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  background-color: var(
    --btn-surface-color,
    hsl(var(--accent-h) var(--accent-s) var(--accent-l))
  );
  border: var(--btn-border-width) solid var(--btn-border-color);
  border-radius: variables.$border-radius;
  padding: 12px 20px 11px;
  transition: background-color variables.$duration ease-in-out;
  cursor: pointer;

  &:hover {
    background-color: hsl(
      var(--accent-h) var(--accent-hover-s) var(--accent-hover-l)
    );
  }

  &:disabled {
    background-color: var(--btn-surface-disabled, var(--color-disabled));
    cursor: not-allowed;
  }

  /* === Outline modifier === */
  &--outline {
    color: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    background-color: transparent;
    border: 2px solid hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    padding: 10px 18px 9px;
    transition: color variables.$duration ease-in-out,
      background-color variables.$duration ease-in-out,
      border-color variables.$duration ease-in-out;

    &:hover {
      color: var(--color-text-secondary);
      background-color: hsl(
        var(--accent-h) var(--accent-hover-s) var(--accent-hover-l)
      );
      border-color: var(
        --btn-border-color,
        hsl(var(--accent-h) var(--accent-hover-s) var(--accent-hover-l))
      );
    }

    &:disabled {
      color: var(--color-gray);
      background-color: var(--color-disabled-transparent);
      border-color: var(--color-gray);

      svg {
        stroke: var(--color-gray);
      }
    }
  }

  /* === Icon button === */
  &--icon {
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 6px;

    svg {
      width: 20px;
      height: 20px;
      stroke: var(--color-text-secondary);
      transition: stroke variables.$duration ease-in-out;
    }

    &.btn--outline svg {
      stroke: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    }

    &.btn--outline:hover svg {
      stroke: var(--color-text-secondary);
    }

    &.btn--outline:disabled svg {
      stroke: var(--color-gray);
    }
  }

  /* === Gradient button === */
  &--gradient {
    // Gradient stop colors (computed from theme tokens)
    --grad-c1: hsl(
      var(--accent-h) clamp(0%, calc(var(--accent-s) + var(--g-s1)), 100%)
        clamp(0%, calc(var(--accent-l) + var(--g-l1)), 100%)
    );
    --grad-c2: hsl(
      var(--accent-h) clamp(0%, calc(var(--accent-s) + var(--g-s2)), 100%)
        clamp(0%, calc(var(--accent-l) + var(--g-l2)), 100%)
    );
    --grad-c3: hsl(
      var(--accent-h) clamp(0%, calc(var(--accent-s) + var(--g-s3)), 100%)
        clamp(0%, calc(var(--accent-l) + var(--g-l3)), 100%)
    );
    --grad-c4: hsl(
      var(--accent-h) clamp(0%, calc(var(--accent-s) + var(--g-s4)), 100%)
        clamp(0%, calc(var(--accent-l) + var(--g-l4)), 100%)
    );

    font-size: 0.875rem;
    line-height: 1.25rem;
    color: var(--color-text-secondary);
    background-color: hsl(var(--accent-h) var(--accent-s) var(--accent-l));

    background-image: linear-gradient(
      135deg,
      var(--grad-c1) var(--g-stop1),
      var(--grad-c2) var(--g-stop2),
      var(--grad-c3) var(--g-stop3),
      var(--grad-c4) var(--g-stop4)
    );
    border: none;
    padding: 12px 16px 11px;
    transition: --grad-c1 variables.$duration-fast ease-in-out,
      --grad-c2 variables.$duration-fast ease-in-out,
      --grad-c3 variables.$duration-fast ease-in-out,
      --grad-c4 variables.$duration-fast ease-in-out;
    cursor: pointer;

    // Hover updates only gradient stops â€“ background shorthand untouched
    &:hover {
      --grad-c1: hsl(
        var(--accent-h)
          clamp(0%, calc(var(--accent-hover-s) + var(--g-s1-h)), 100%)
          clamp(0%, calc(var(--accent-hover-l) + var(--g-l1-h)), 100%)
      );
      --grad-c2: hsl(
        var(--accent-h)
          clamp(0%, calc(var(--accent-hover-s) + var(--g-s2-h)), 100%)
          clamp(0%, calc(var(--accent-hover-l) + var(--g-l2-h)), 100%)
      );
      --grad-c3: hsl(
        var(--accent-h)
          clamp(0%, calc(var(--accent-hover-s) + var(--g-s3-h)), 100%)
          clamp(0%, calc(var(--accent-hover-l) + var(--g-l3-h)), 100%)
      );
      --grad-c4: hsl(
        var(--accent-h)
          clamp(0%, calc(var(--accent-hover-s) + var(--g-s4-h)), 100%)
          clamp(0%, calc(var(--accent-hover-l) + var(--g-l4-h)), 100%)
      );
      background-color: hsl(
        var(--accent-h) var(--accent-hover-s) var(--accent-hover-l)
      );
    }
  }
}
